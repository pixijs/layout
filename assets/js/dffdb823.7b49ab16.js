"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7828],{3023:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(3696);const s={},a=i.createContext(s);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(a.Provider,{value:n},e.children)}},4883:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/core/layout-system","title":"LayoutSystem API","description":"Layout System API","source":"@site/docs/guides/core/layout-system.md","sourceDirName":"guides/core","slug":"/guides/core/layout-system","permalink":"/docs/guides/core/layout-system","draft":false,"unlisted":false,"editUrl":"https://github.com/pixijs/layout/tree/main/website/docs/docs/guides/core/layout-system.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"LayoutSystem API","hide_title":true,"sidebar_position":2},"sidebar":"guides","previous":{"title":"Layout API","permalink":"/docs/guides/core/layout"},"next":{"title":"Components","permalink":"/docs/guides/core/components"}}');var s=t(2540),a=t(3023);const o={title:"LayoutSystem API",hide_title:!0,sidebar_position:2},r=void 0,l={},d=[{value:"Layout System API",id:"layout-system-api",level:2},{value:"Initializing the LayoutSystem",id:"initializing-the-layoutsystem",level:2},{value:"LayoutSystemOptions",id:"layoutsystemoptions",level:3},{value:"Continuous Layout Updates",id:"continuous-layout-updates",level:2},{value:"Enabling Debug Renderer",id:"enabling-debug-renderer",level:2},{value:"Manually Triggering Layout Recalculations",id:"manually-triggering-layout-recalculations",level:2},{value:"Customizing Yoga Configuration",id:"customizing-yoga-configuration",level:2},{value:"Basic Configuration",id:"basic-configuration",level:3},{value:"Common Configuration Options",id:"common-configuration-options",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"layout-system-api",children:"Layout System API"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"LayoutSystem"})," integrates layout management into the PixiJS rendering lifecycle.\nIt ensures that layouts are continuously updated, recalculated when necessary, and optionally visualized with debug tools."]}),"\n",(0,s.jsx)(n.h2,{id:"initializing-the-layoutsystem",children:"Initializing the LayoutSystem"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"LayoutSystem"})," must be installed into your PixiJS application to manage layouts automatically.\nDuring initialization, you can pass ",(0,s.jsx)(n.code,{children:"LayoutSystemOptions"})," to control its behavior."]}),"\n",(0,s.jsx)(n.p,{children:"Example setup:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import '@pixi/layout'; // required to ensure all systems and mixins are registered\nimport { Application } from 'pixi.js';\nimport { LayoutSystem } from '@pixi/layout';\n\nconst app = new Application();\n\nawait app.init({\n    background: '#1099bb',\n    resizeTo: window,\n    layout: {\n        autoUpdate: true,\n        enableDebug: false,\n        throttle: 100,\n    },\n});\n\n// can later be accessed via app.renderer.layout\nconst layoutSystem = app.renderer.layout;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"layoutsystemoptions",children:"LayoutSystemOptions"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"LayoutSystemOptions"})," interface looks like this:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface LayoutSystemOptions {\n    autoUpdate?: boolean;\n    enableDebug?: boolean;\n    debugModificationCount?: number;\n    throttle?: number;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Each option:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"autoUpdate"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsxs)(n.td,{children:["If ",(0,s.jsx)(n.code,{children:"true"}),", the layout system will automatically recalculate layouts on each frame. Set ",(0,s.jsx)(n.code,{children:"false"})," if you prefer manual updates"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"enableDebug"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsxs)(n.td,{children:["If ",(0,s.jsx)(n.code,{children:"true"}),", the debug renderer is activated at startup to visualize layout boxes. Note that you should only enable this on development builds."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"debugModificationCount"}),(0,s.jsx)(n.td,{children:"number"}),(0,s.jsxs)(n.td,{children:["The number of times a node must be modified before the debug renderer will show the layout boxes. This is useful for performance optimization. Default is ",(0,s.jsx)(n.code,{children:"0"}),", meaning it will show immediately."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"throttle"}),(0,s.jsx)(n.td,{children:"number"}),(0,s.jsxs)(n.td,{children:["The delay (in milliseconds) to batch layout size recalculations for better performance. Default is ",(0,s.jsx)(n.code,{children:"100ms"}),". This is useful for reducing the number of recalculations during rapid changes."]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"continuous-layout-updates",children:"Continuous Layout Updates"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"autoUpdate"})," is enabled, the LayoutSystem hooks into the ",(0,s.jsx)(n.code,{children:"prerender"})," phase of the PixiJS lifecycle."]}),"\n",(0,s.jsx)(n.p,{children:"Each frame, the system:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Traverses the scene graph recursively."}),"\n",(0,s.jsx)(n.li,{children:"Finds nodes with an active layout."}),"\n",(0,s.jsx)(n.li,{children:"Checks if any node needs to update its layout."}),"\n",(0,s.jsx)(n.li,{children:"Applies recalculated transforms if needed."}),"\n",(0,s.jsx)(n.li,{children:"Optionally renders debug overlays."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Additionally, layout recalculations are throttled to avoid expensive recalculations every frame, especially for size changes involving intrinsic content (",(0,s.jsx)(n.code,{children:"width: 'intrinsic'"}),")."]}),"\n",(0,s.jsx)(n.h2,{id:"enabling-debug-renderer",children:"Enabling Debug Renderer"}),"\n",(0,s.jsx)(n.p,{children:"The LayoutSystem can optionally render layout regions for debugging.\nThe debug renderer draws margin, border, padding, flex, and content areas in different colors."}),"\n",(0,s.jsx)(n.p,{children:"To enable at runtime:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"app.renderer.layout.enableDebug(true);\n"})}),"\n",(0,s.jsx)(n.p,{children:"To disable:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"app.renderer.layout.enableDebug(false);\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"enableDebug"})," was passed in ",(0,s.jsx)(n.code,{children:"LayoutSystemOptions"}),", the debug renderer will activate automatically."]}),"\n",(0,s.jsxs)(n.p,{children:["When active, the debug overlay is drawn into a special container (",(0,s.jsx)(n.code,{children:"DebugRenderer.holder"}),") attached to the stage."]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"enableDebug"})," method is asynchronous and returns a promise. This is because we dynamically load the debug renderer module to keep the core bundle size small."]}),(0,s.jsxs)(n.p,{children:["You typically do not need to ",(0,s.jsx)(n.code,{children:"await"})," this method as the debug renderer will be enabled in the next frame.\nHowever, if you need to ensure the debug renderer is ready before performing other operations, you can ",(0,s.jsx)(n.code,{children:"await"})," it."]})]}),"\n",(0,s.jsx)(n.h2,{id:"manually-triggering-layout-recalculations",children:"Manually Triggering Layout Recalculations"}),"\n",(0,s.jsxs)(n.p,{children:["If you disabled ",(0,s.jsx)(n.code,{children:"autoUpdate"}),", or if you want to manually control when layouts are recalculated, you can call:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"app.renderer.layout.update(app.stage); // or any other container if you want to update a specific part of the scene graph\n"})}),"\n",(0,s.jsx)(n.p,{children:"This will update only the given object and its children (if they have layouts)."}),"\n",(0,s.jsx)(n.h2,{id:"customizing-yoga-configuration",children:"Customizing Yoga Configuration"}),"\n",(0,s.jsx)(n.p,{children:"The layout system uses Yoga under the hood for calculating layouts. You can customize Yoga's behavior by modifying its configuration settings."}),"\n",(0,s.jsx)(n.h3,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { getYogaConfig, Errata } from '@pixi/layout';\n\nawait app.init(...);\n\n// Get the global Yoga configuration\nconst config = getYogaConfig();\n\n// Example: Use Classic errata mode\nconfig.setErrata(Errata.Classic);\n// Example: Set point scaling\nconfig.setPointScaleFactor(1);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"common-configuration-options",children:"Common Configuration Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Method"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Errata Mode"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"setErrata()"})}),(0,s.jsx)(n.td,{children:"Controls how Yoga handles edge cases and legacy behavior"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Point Scale"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"setPointScaleFactor()"})}),(0,s.jsx)(n.td,{children:"Sets the scaling factor for point-based measurements"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Use Web Defaults"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"setUseWebDefaults()"})}),(0,s.jsx)(n.td,{children:"Enables web-standard default values"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Experimental Feature X"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"setExperimentalFeatureEnabled()"})}),(0,s.jsx)(n.td,{children:"Toggles experimental Yoga features"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["For a complete list of configuration options and their effects, refer to the ",(0,s.jsx)(n.a,{href:"https://www.yogalayout.dev/docs/getting-started/configuring-yoga",children:"Yoga documentation"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Configuration changes affect all layout calculations globally. Make sure to set your configuration early in your application's lifecycle."})})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);